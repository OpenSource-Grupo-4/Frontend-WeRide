import{a as N,b as q}from"./chunk-NRTV435P.js";import{a as G,b as J,c as K,e as Q,f as W}from"./chunk-YIL4W2OU.js";import{O as H,P as Y}from"./chunk-OG6XGFB4.js";import{j as T,k as B,p as z,s as U}from"./chunk-7GAM2AWN.js";import{a as E}from"./chunk-WXPR64CH.js";import{a as V}from"./chunk-QHL7TNPJ.js";import{Kb as b,Lb as o,Mb as i,Nb as A,Tb as k,Xb as L,Yb as I,_ as s,_a as l,ca as x,eb as F,ga as h,hc as R,lb as v,lc as a,mc as g,n as P,na as w,nc as d,oa as D,rb as f,x as u,xc as M,yc as _}from"./chunk-EYER3JCQ.js";var O=class{constructor(t,e,r,p,m,$,ot,lt,ct,pt,st,dt,mt,ut,ft,bt,gt,Pt){this.id=t;this.name=e;this.description=r;this.price=p;this.currency=m;this.pricePerMinute=$;this.duration=ot;this.durationDays=lt;this.maxTripsPerDay=ct;this.maxMinutesPerTrip=pt;this.freeMinutesPerMonth=st;this.discountPercentage=dt;this.benefits=mt;this.color=ut;this.isPopular=ft;this.isActive=bt;this.studentVerificationRequired=gt;this.corporateVerificationRequired=Pt}};var c=class{static toDomain(t){return new O(t.id,t.name,t.description,t.price,t.currency,t.pricePerMinute,t.duration,t.durationDays,t.maxTripsPerDay,t.maxMinutesPerTrip,t.freeMinutesPerMonth,t.discountPercentage,t.benefits,t.color,t.isPopular,t.isActive,t.studentVerificationRequired,t.corporateVerificationRequired)}static toDomainList(t){return t.map(e=>this.toDomain(e))}};var C=class n{constructor(t){this.http=t}baseUrl=`${E.apiUrl}${E.endpoints.plans}`;getAll(){return this.http.get(this.baseUrl).pipe(u(t=>c.toDomainList(t)))}getById(t){return this.http.get(`${this.baseUrl}/${t}`).pipe(u(e=>c.toDomain(e)))}create(t){return this.http.post(this.baseUrl,t).pipe(u(e=>c.toDomain(e)))}update(t,e){return this.http.put(`${this.baseUrl}/${t}`,e).pipe(u(r=>c.toDomain(r)))}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(h(V))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};var y=class n{constructor(t){this.plansApiEndpoint=t}plansSubject=new P([]);plans$=this.plansSubject.asObservable();selectedPlanSubject=new P(null);selectedPlan$=this.selectedPlanSubject.asObservable();loadingSubject=new P(!1);loading$=this.loadingSubject.asObservable();loadPlans(){this.loadingSubject.next(!0),this.plansApiEndpoint.getAll().pipe(s(t=>{this.plansSubject.next(t),this.loadingSubject.next(!1)})).subscribe()}loadPlanById(t){this.loadingSubject.next(!0),this.plansApiEndpoint.getById(t).pipe(s(e=>{this.selectedPlanSubject.next(e),this.loadingSubject.next(!1)})).subscribe()}selectPlan(t){this.selectedPlanSubject.next(t)}createPlan(t){return this.plansApiEndpoint.create(t).pipe(s(e=>{let r=this.plansSubject.value;this.plansSubject.next([...r,e])}))}updatePlan(t,e){return this.plansApiEndpoint.update(t,e).pipe(s(r=>{let p=this.plansSubject.value,m=p.findIndex($=>$.id===t);m!==-1&&(p[m]=r,this.plansSubject.next([...p]))}))}deletePlan(t){return this.plansApiEndpoint.delete(t).pipe(s(()=>{let e=this.plansSubject.value;this.plansSubject.next(e.filter(r=>r.id!==t))}))}static \u0275fac=function(e){return new(e||n)(h(C))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};function nt(n,t){n&1&&(o(0,"div",5),a(1,"Cargando planes..."),i())}function it(n,t){if(n&1){let e=k();o(0,"button",6),L("click",function(){let p=w(e).$implicit,m=I();return D(m.selectPlan(p))}),o(1,"span",7),a(2),i(),o(3,"mat-icon"),a(4,"chevron_right"),i()()}if(n&2){let e=t.$implicit;l(2),g(e.name)}}function at(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;l(),g(e)}}function rt(n,t){if(n&1&&(o(0,"div",8)(1,"mat-card",9)(2,"mat-card-header")(3,"mat-card-title"),a(4),i()(),o(5,"mat-card-content")(6,"p",10),a(7),i(),o(8,"div",11)(9,"p")(10,"strong"),a(11,"Duraci\xF3n:"),i(),a(12),i(),o(13,"p")(14,"strong"),a(15,"Precio:"),i(),a(16),i(),o(17,"p")(18,"strong"),a(19,"Precio por minuto:"),i(),a(20),i(),o(21,"p")(22,"strong"),a(23,"Descuento:"),i(),a(24),i(),o(25,"p")(26,"strong"),a(27,"Minutos gratis al mes:"),i(),a(28),i()(),o(29,"div",12)(30,"h4"),a(31,"Beneficios:"),i(),o(32,"ul"),f(33,at,2,1,"li",13),i()()(),o(34,"mat-card-actions")(35,"button",14),a(36,"Pagar"),i()()()()),n&2){let e=t.ngIf,r=I();l(3),R("color",e.color),l(),g(e.name),l(3),g(e.description),l(5),d(" ",r.getFormattedDuration(e)),l(4),d(" ",r.getFormattedPrice(e)),l(4),d(" $",e.pricePerMinute),l(4),d(" ",e.discountPercentage,"%"),l(4),d(" ",e.freeMinutesPerMonth),l(5),b("ngForOf",e.benefits)}}var S=class n{constructor(t){this.planStore=t;this.plans$=this.planStore.plans$,this.selectedPlan$=this.planStore.selectedPlan$,this.loading$=this.planStore.loading$}plans$;selectedPlan$;loading$;ngOnInit(){this.planStore.loadPlans()}selectPlan(t){this.planStore.selectPlan(t)}getFormattedPrice(t){return`${t.currency==="USD"?"$":t.currency}${t.price.toFixed(2)}`}getFormattedDuration(t){return t.duration==="monthly"?"Mensual":t.duration}static \u0275fac=function(e){return new(e||n)(F(y))};static \u0275cmp=v({type:n,selectors:[["app-plan-list"]],decls:10,vars:9,consts:[[1,"plans-layout"],[1,"plan-list-section"],["class","loading",4,"ngIf"],["class","plan-card-btn",3,"click",4,"ngFor","ngForOf"],["class","plan-detail-section",4,"ngIf"],[1,"loading"],[1,"plan-card-btn",3,"click"],[1,"plan-title"],[1,"plan-detail-section"],[1,"detail-card"],[1,"plan-description"],[1,"plan-info"],[1,"plan-benefits"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"pay-button"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Planes"),i(),f(4,nt,2,0,"div",2),M(5,"async"),f(6,it,5,1,"button",3),M(7,"async"),i(),f(8,rt,37,10,"div",4),M(9,"async"),i()),e&2&&(l(4),b("ngIf",_(5,3,r.loading$)),l(2),b("ngForOf",_(7,5,r.plans$)),l(2),b("ngIf",_(9,7,r.selectedPlan$)))},dependencies:[q,N,U,T,B,G,W,J,K,Q,Y,H,z],styles:[".plans-layout[_ngcontent-%COMP%]{margin-left:3rem;display:grid;grid-template-columns:40% 1fr;gap:3rem;padding:2rem;min-height:100vh}.plan-list-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.plan-list-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1.5rem;color:#333}.plan-card-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:600;margin-bottom:2rem}.plan-card-container[_ngcontent-%COMP%]{margin-left:6rem;display:flex;flex-direction:column;gap:1.5rem;padding:2rem}.plan-card[_ngcontent-%COMP%]{flex:1 1 calc(33.333% - 32px);box-sizing:border-box;max-width:calc(33.333% - 32px);padding:9px 16px 0 0}.plan-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.plan-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.plan-card-btn[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:1px solid #D9D9D9;border-radius:12px;padding:1.5rem;cursor:pointer;text-align:left;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;transition:all .6s ease}.plan-card-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000026;transform:translateY(-2px);border-color:#7145d8}.plan-card-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}.plan-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#7145d8;flex:1}.mat-icon[_ngcontent-%COMP%]{color:#7145d8;flex-shrink:0}.plan-detail-section[_ngcontent-%COMP%]{position:sticky;top:2rem;height:fit-content}.detail-card[_ngcontent-%COMP%]{box-shadow:0 4px 12px #00000026;border-radius:16px;overflow:hidden}.detail-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem}.detail-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#7145d8;font-size:1.75rem;font-weight:600}.detail-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.plan-info[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background-color:#f8f9fa;border-radius:8px}.plan-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#333}.plan-benefits[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;color:#333;font-size:1.1rem;font-weight:600}.plan-benefits[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:1.5rem;margin:0}.plan-benefits[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#555;line-height:1.5}.detail-card[_ngcontent-%COMP%]   mat-card_actions[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center}.pay-button[_ngcontent-%COMP%]{width:100%;padding:.75rem 2rem;font-size:1.1rem;font-weight:600;background-color:#7145d8!important;color:#fff!important;border-radius:8px}.pay-button[_ngcontent-%COMP%]:hover{background-color:#5a37b0!important}"]})};var X=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-plan-layout"]],decls:1,vars:0,template:function(e,r){e&1&&A(0,"app-plan-list")},dependencies:[S],encapsulation:2})};export{X as PlanLayout};
