import{a as D}from"./chunk-7ADDTD6Y.js";import{a as E}from"./chunk-YIL4W2OU.js";import{c as w}from"./chunk-RFKOBGZG.js";import{O as y}from"./chunk-OG6XGFB4.js";import{j as T,k as P,s as b}from"./chunk-7GAM2AWN.js";import{Kb as m,Lb as r,Mb as n,Rb as C,Sb as v,Tb as u,Xb as f,Yb as s,_a as c,ha as x,ic as M,lb as h,lc as i,na as d,nc as p,oa as g,rb as _,vc as O}from"./chunk-EYER3JCQ.js";var I=()=>[1,2,3,4,5];function F(o,t){if(o&1){let e=u();C(0),r(1,"span",13),f("click",function(){let l=d(e).$implicit,k=s(2);return g(k.setRating(l))}),i(2," \u2605 "),n(),v()}if(o&2){let e=t.$implicit,a=s(2);c(),M("filled",e<=a.rating)}}function z(o,t){if(o&1){let e=u();r(0,"div",4)(1,"div",5)(2,"h3"),i(3,"Scooter El\xE9ctrico"),n(),r(4,"p")(5,"strong"),i(6,"Ubicaci\xF3n:"),n(),i(7),n(),r(8,"p")(9,"strong"),i(10,"Bater\xEDa:"),n(),i(11),n(),r(12,"p")(13,"strong"),i(14,"Tiempo restante:"),n(),i(15),n(),r(16,"p")(17,"strong"),i(18,"Tiempo Extra:"),n(),i(19),n()(),r(20,"div",6)(21,"div",7)(22,"div",8),_(23,F,3,2,"ng-container",9),n(),r(24,"span",10),i(25,"D\xE9janos tu puntuaci\xF3n"),n()(),r(26,"div",11)(27,"button",12),f("click",function(){d(e);let l=s();return g(l.goToHistory())}),i(28," Historial de viajes "),n(),r(29,"button",12),f("click",function(){d(e);let l=s();return g(l.goToSettings())}),i(30," Configuraci\xF3n "),n()()()()}if(o&2){let e=s();c(7),p(" ",e.location||"Cargando..."),c(4),p(" ",e.battery,"%"),c(4),p(" ",e.remainingTime||"Cargando..."," "),c(4),p(" ",e.extraTime||"Cargando..."),c(4),m("ngForOf",O(5,I))}}function V(o,t){o&1&&(r(0,"div",14)(1,"p"),i(2,"Cargando datos del viaje..."),n()())}var S=class o{router=x(w);tripService=x(D);currentTrip=null;location="";battery=0;remainingTime="";extraTime="";rating=0;loading=!1;ngOnInit(){this.loadCurrentTripData()}loadCurrentTripData(){this.loading=!0,this.tripService.loadLatestTrip().subscribe({next:t=>{t&&(this.currentTrip=t,this.updateDisplayData(t)),this.loading=!1},error:t=>{console.error("Error loading trip data:",t),this.loading=!1}})}updateDisplayData(t){t.endLocation&&(this.location=t.endLocation.address),t.vehicle&&(this.battery=t.vehicle.battery);let e=Math.floor(t.duration),a=Math.floor(t.duration%1*60);this.remainingTime=`${e}:${a.toString().padStart(2,"0")} min`,this.extraTime="Aun no sobrepasas tu tiempo"}setRating(t){this.rating=t}goToHistory(){this.router.navigate(["/trip/history"])}goToSettings(){this.router.navigate(["/trip/settings"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-trip-details"]],decls:4,vars:2,consts:[[1,"trip-container"],[1,"trip-details-card"],["class","card-content",4,"ngIf"],["class","loading-content",4,"ngIf"],[1,"card-content"],[1,"trip-info"],[1,"trip-footer"],[1,"trip-rating"],[1,"stars"],[4,"ngFor","ngForOf"],[1,"rating-label"],[1,"trip-actions"],["mat-stroked-button","",1,"action-btn",3,"click"],[1,"star",3,"click"],[1,"loading-content"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"mat-card",1),_(2,z,31,6,"div",2)(3,V,3,0,"div",3),n()()),e&2&&(c(2),m("ngIf",!a.loading),c(),m("ngIf",a.loading))},dependencies:[E,y,b,T,P],styles:[".trip-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden}.map-section[_ngcontent-%COMP%]{flex:1;width:100%;position:relative;overflow:hidden}.map-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,#e8f5e9,#c8e6c9,#a5d6a7);position:relative}.trip-details-card[_ngcontent-%COMP%]{flex-shrink:0;margin:0!important;border-radius:0!important;box-shadow:0 -4px 16px #0000001a!important;background:#fff;padding:0!important}.card-content[_ngcontent-%COMP%]{padding:32px 48px}.trip-info[_ngcontent-%COMP%]{margin-bottom:32px}.trip-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:22px;font-weight:600;color:#000;letter-spacing:-.3px}.trip-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:14px;line-height:1.6;color:#333}.trip-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;margin-right:4px}.trip-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.trip-rating[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px}.stars[_ngcontent-%COMP%]{display:flex;gap:6px}.star[_ngcontent-%COMP%]{font-size:36px;cursor:pointer;color:#e0e0e0;transition:all .2s ease;-webkit-user-select:none;user-select:none;line-height:1}.star.filled[_ngcontent-%COMP%]{color:#000}.star[_ngcontent-%COMP%]:hover{color:#666;transform:scale(1.1)}.rating-label[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#000;white-space:nowrap}.trip-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px}.action-btn[_ngcontent-%COMP%]{min-width:200px;height:48px;font-size:15px;font-weight:500;border-radius:24px!important;border:1.5px solid #000!important;color:#000!important;background:#fff!important;letter-spacing:.2px;transition:all .6s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5!important;transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.card-content[_ngcontent-%COMP%]{padding:24px}.trip-rating[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.stars[_ngcontent-%COMP%]{gap:8px}.star[_ngcontent-%COMP%]{font-size:32px}.trip-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.action-btn[_ngcontent-%COMP%]{width:100%;min-width:unset}}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{padding:20px}.trip-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.trip-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}"]})};export{S as a};
