import{a as D,b as F}from"./chunk-NRTV435P.js";import{d as j,g as z}from"./chunk-RFKOBGZG.js";import{P as H}from"./chunk-OG6XGFB4.js";import{j as V,k as S,q as A,s as N}from"./chunk-7GAM2AWN.js";import{a as p}from"./chunk-WXPR64CH.js";import{a as b}from"./chunk-QHL7TNPJ.js";import{D as P,Kb as g,Lb as r,Mb as i,Tb as I,Xb as y,Yb as u,_a as a,ca as d,ga as m,ha as h,kc as E,lb as R,lc as o,mc as x,na as C,nc as L,oa as O,oc as $,rb as M,xc as w,zc as U}from"./chunk-EYER3JCQ.js";var v=class n{constructor(t){this.http=t}baseUrl=`${p.apiUrl}${p.endpoints.bookings}`;getAll(){return this.http.get(this.baseUrl)}create(t){return this.http.post(this.baseUrl,t)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}update(t,e){return this.http.patch(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(m(b))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};var k=class n{constructor(t){this.http=t}baseUrl=`${p.apiUrl}${p.endpoints.vehicles}`;getAll(){return this.http.get(this.baseUrl)}create(t){return this.http.post(this.baseUrl,t)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}update(t,e){return this.http.patch(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(m(b))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};var _=class n{constructor(t){this.http=t}baseUrl=`${p.apiUrl}${p.endpoints.locations}`;getAll(){return this.http.get(this.baseUrl)}create(t){return this.http.post(this.baseUrl,t)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}update(t,e){return this.http.patch(`${this.baseUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(m(b))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};function G(n,t){n&1&&(r(0,"div",6)(1,"p"),o(2,"Cargando reservas..."),i()())}function K(n,t){if(n&1){let e=I();r(0,"div",9)(1,"div",10)(2,"h3"),o(3),i(),r(4,"span",11),o(5),i()(),r(6,"div",12)(7,"div",13)(8,"mat-icon"),o(9,"location_on"),i(),r(10,"span"),o(11),i()(),r(12,"div",13)(13,"mat-icon"),o(14,"schedule"),i(),r(15,"span"),o(16),w(17,"date"),i()(),r(18,"div",13)(19,"mat-icon"),o(20,"access_time"),i(),r(21,"span"),o(22),i()(),r(23,"div",13)(24,"mat-icon"),o(25,"attach_money"),i(),r(26,"span"),o(27),i()()(),r(28,"div",14)(29,"button",15),y("click",function(){let c=C(e).$implicit,l=u(2);return O(l.editBooking(c.id))}),o(30,"Edit"),i(),r(31,"button",16),y("click",function(){let c=C(e).$implicit,l=u(2);return O(l.cancelBooking(c.id))}),o(32,"Cancel"),i()()()}if(n&2){let e=t.$implicit;a(3),x(e.vehicleName),a(),E(e.status),a(),x(e.status),a(6),$("",e.startLocationName," \u2192 ",e.endLocationName),a(5),x(U(17,10,e.startDate,"short")),a(6),L("",e.duration||"N/A"," minutos"),a(5),L("$",e.finalCost?e.finalCost.toFixed(2):"N/A"),a(4),g("disabled",e.status!=="pending")}}function Q(n,t){if(n&1&&(r(0,"div",7),M(1,K,33,13,"div",8),i()),n&2){let e=u();a(),g("ngForOf",e.bookings)}}function X(n,t){n&1&&(r(0,"div",17)(1,"mat-icon"),o(2,"book_online"),i(),r(3,"h2"),o(4,"No bookings yet"),i(),r(5,"p"),o(6,"Create your first booking to start using WeRide"),i(),r(7,"button",2)(8,"mat-icon"),o(9,"add"),i(),o(10," Create Booking "),i()())}var J=class n{bookingsApi=h(v);vehiclesApi=h(k);locationsApi=h(_);bookings=[];isLoading=!0;ngOnInit(){this.loadBookings()}loadBookings(){P({bookings:this.bookingsApi.getAll(),vehicles:this.vehiclesApi.getAll(),locations:this.locationsApi.getAll()}).subscribe({next:({bookings:t,vehicles:e,locations:s})=>{this.bookings=t.map(c=>{let l=e.find(f=>f.id===c.vehicleId),W=s.find(f=>f.id===c.startLocationId),q=s.find(f=>f.id===c.endLocationId);return{id:c.id,vehicleName:l?`${l.brand} ${l.model}`:"Unknown Vehicle",startLocationName:W?.name||"Unknown",endLocationName:q?.name||"Unknown",startDate:new Date(c.startDate),duration:c.duration,finalCost:c.finalCost,status:c.status}}),this.isLoading=!1},error:t=>{console.error("Error loading bookings:",t),this.isLoading=!1}})}editBooking(t){console.log("Edit booking:",t)}cancelBooking(t){let e=this.bookings.find(s=>s.id===t);e&&e.status==="pending"&&this.bookingsApi.update(t,{status:"cancelled"}).subscribe({next:()=>{e.status="cancelled"},error:s=>console.error("Error cancelling booking:",s)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=R({type:n,selectors:[["app-booking-list"]],decls:11,vars:3,consts:[[1,"booking-container"],[1,"header"],["routerLink","/booking/form",1,"btn-primary"],["class","loading-state",4,"ngIf"],["class","bookings-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-state"],[1,"bookings-grid"],["class","booking-card",4,"ngFor","ngForOf"],[1,"booking-card"],[1,"booking-header"],[1,"status"],[1,"booking-details"],[1,"detail"],[1,"booking-actions"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click","disabled"],[1,"empty-state"]],template:function(e,s){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),o(3,"My Bookings"),i(),r(4,"button",2)(5,"mat-icon"),o(6,"add"),i(),o(7," New Booking "),i()(),M(8,G,3,0,"div",3)(9,Q,2,1,"div",4)(10,X,11,0,"div",5),i()),e&2&&(a(8),g("ngIf",s.isLoading),a(),g("ngIf",!s.isLoading),a(),g("ngIf",!s.isLoading&&s.bookings.length===0))},dependencies:[N,V,S,F,D,H,z,j,A],styles:[".booking-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:2rem;font-weight:600;margin:0}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1565c0}.bookings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-bottom:32px}.booking-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;border:1px solid #e0e0e0;transition:box-shadow .2s}.booking-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.booking-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.booking-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.25rem;font-weight:600}.status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;text-transform:uppercase}.status.active[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.status.completed[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.status.cancelled[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}.booking-details[_ngcontent-%COMP%]{margin-bottom:20px}.detail[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;color:#666;font-size:14px}.detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.booking-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd;padding:8px 16px;border-radius:6px;font-size:14px;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#eee}.btn-danger[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f;border:1px solid #ffcdd2;padding:8px 16px;border-radius:6px;font-size:14px;cursor:pointer;transition:background-color .2s}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#ffcdd2}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:1.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:16px}"]})};export{J as BookingListComponent};
