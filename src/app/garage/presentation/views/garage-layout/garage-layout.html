<div class="garage-container">
  <h1>{{ 'garage.title' | translate }}</h1>

  <div
    style="
      margin-bottom: 16px;
      padding: 12px;
      background: #f5f5f5;
      border-radius: 8px;
    "
  >
    <p style="margin: 0 0 8px 0; font-weight: 600">
      Probar Modales (Temporal):
    </p>
    <div style="display: flex; gap: 8px; flex-wrap: wrap">
      <button mat-button color="primary" (click)="openQrScannerModal()">
        QR Scanner
      </button>
      <button
        mat-button
        color="primary"
        (click)="openManualUnlockModal(filteredVehicles[0])"
        [disabled]="!filteredVehicles.length"
      >
        Manual Unlock
      </button>
      <button
        mat-button
        color="primary"
        (click)="openReportProblemModal(filteredVehicles[0])"
        [disabled]="!filteredVehicles.length"
      >
        Reportar Problema
      </button>
    </div>
  </div>

  <app-garage-filter (filterChange)="applyFilter($event)"></app-garage-filter>

  @if (isLoading) {
  <div class="loading">
    <p>{{ 'garage.loading' | translate }}</p>
  </div>
  } @if (error) {
  <div class="error">
    <p>{{ error }}</p>
    <button mat-button color="primary" (click)="loadVehicles()">
      {{ 'common.retry' | translate }}
    </button>
  </div>
  } @if (!isLoading && !error) {
  <div class="vehicle-grid">
    @for (vehicle of filteredVehicles; track vehicle.id) {
    <app-vehicle-card
      [vehicle]="vehicle"
      (toggleFavorite)="toggleFavorite($event)"
      (viewDetails)="openVehicleDetails($event)"
      (reserve)="navigateToScheduleUnlock($event)"
    >
    </app-vehicle-card>
    } @if (filteredVehicles.length === 0) {
    <div class="no-results">
      <p>{{ 'garage.noResults' | translate }}</p>
    </div>
    }
  </div>
  }
</div>
