<ng-container *ngIf="user$ | async as user; else loadingState">
  <div class="user-stats">
    <div class="user-info">
      <div class="avatar" [class.has-image]="!!user.profilePicture">
        <img
          *ngIf="user.profilePicture"
          [src]="user.profilePicture"
          [alt]="user.name || 'Avatar de usuario'"
        />
        <span *ngIf="!user.profilePicture">{{ getInitials(user.name) }}</span>
      </div>
      <div class="user-details">
        <h2 class="user-name">{{ user.name }}</h2>
      </div>
    </div>
    <div class="stats-container">
      <div class="stat-item">
        <p class="stat-value">{{ user.statistics.totalTrips }}</p>
        <span class="stat-label">Trayectos</span>
      </div>

      <div class="stat-item">
        <p class="stat-value">{{ user.statistics.totalDistance | number: '1.0-0' }}</p>
        <span class="stat-label">Metros</span>
      </div>

      <div class="stat-item">
        <p class="stat-value">{{ user.statistics.totalSpent | currency: '$' }}</p>
        <span class="stat-label">Gasto total</span>
      </div>

      <div class="stat-item">
        <p class="stat-value">{{ user.statistics.averageRating | number: '1.0-0' }}</p>
        <span class="stat-label">Puntuación</span>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #loadingState>
  <div class="user-stats">
    <p>Cargando estadísticas...</p>
  </div>
</ng-template>